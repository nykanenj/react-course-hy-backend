(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(39)},18:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(11),c=n.n(u),o=(n(18),n(2)),i=n(3),l=n.n(i),s="/api/persons",m=function(){return l.a.get(s).then(function(e){return e.data})},f=function(e){return l.a.post(s,e).then(function(e){return e.data})},d=function(e){return l.a.delete("".concat(s,"/").concat(e)).then(function(){return e})},v=function(e,t){return l.a.put("".concat(s,"/").concat(t),e).then(function(e){return e.data})},p=function(e){var t=e.expression,n=e.setExpression;return r.a.createElement("div",null,r.a.createElement("h3",null,"Suodata hakutuloksia"),r.a.createElement("div",null,"Suodata:",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})))},E=function(e){var t=e.name,n=e.number,a=e.id,u=e.removeHandler;return r.a.createElement("div",null," ",t," ",n," ",r.a.createElement("button",{onClick:function(){return u(t,a)}}," Poista ")," ")},b=function(e){var t=e.records,n=e.expression,a=e.removeHandler,u=new RegExp(n,"i");return r.a.createElement("div",null,r.a.createElement("h3",null,"Numerot"),t.filter(function(e){return u.test(e.name)}).map(function(e){return r.a.createElement(E,{key:e.id,name:e.name,number:e.number,id:e.id,removeHandler:a})}))},h=function(e){var t=e.addPerson,n=e.newName,a=e.setNewName,u=e.newNumber,c=e.setNewNumber;return r.a.createElement("div",null,r.a.createElement("h3",null,"Lis\xe4\xe4 henkil\xf6"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"Nimi:",r.a.createElement("input",{value:n,onChange:function(e){a(e.target.value)}})),r.a.createElement("div",null,"Numero:",r.a.createElement("input",{value:u,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Lis\xe4\xe4"))))},x=function(e){var t=e.message,n=e.classNameProp;return null===t?null:r.a.createElement("div",{className:n},t)},w=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),l=i[0],s=i[1],E=Object(a.useState)(""),w=Object(o.a)(E,2),N=w[0],j=w[1],g=Object(a.useState)(""),k=Object(o.a)(g,2),O=k[0],S=k[1],y=Object(a.useState)({text:null,class:"success"}),H=Object(o.a)(y,2),P=H[0],T=H[1];Object(a.useEffect)(function(){m().then(function(e){return u(e)})},[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(x,{message:P.text,classNameProp:P.class}),r.a.createElement(p,{expression:l,setExpression:s}),r.a.createElement(h,{addPerson:function(e){e.preventDefault();var t=n.findIndex(function(e){return e.name===N}),a={name:N,number:O};-1===t?f(a).then(function(e){return u(n.concat(e))}).then(function(){T({text:"".concat(N," lis\xe4tty kantaan!"),class:"success"}),setTimeout(function(){return T({text:null})},5e3),j(""),S("")}).catch(function(e){T({text:e,class:"error"}),setTimeout(function(){return T({text:null})},5e3)}):window.confirm("".concat(N," already exists, update existing record?"))&&v(a,n[t].id).then(function(e){return u(n.map(function(t){return t.id!==e.id?t:e}))}).then(function(){T({text:"Henkil\xf6n ".concat(N," tietoja p\xe4ivitetty"),class:"success"}),setTimeout(function(){return T({text:null})},5e3),j(""),S("")}).catch(function(){T({text:"".concat(N," on jo poistettu"),class:"error"}),setTimeout(function(){return T({text:null})},5e3)})},newName:N,setNewName:j,newNumber:O,setNewNumber:S}),r.a.createElement(b,{expression:l,records:n,removeHandler:function(e,t){window.confirm("Haluatko varmasti poistaa henkil\xf6n ".concat(e,"?"))&&d(t).then(function(e){var t=n.filter(function(t){return t.id!==e});u(t)}).then(function(){T({text:"".concat(e," poistettu kannasta!"),class:"success"}),setTimeout(function(){return T({text:null})},5e3)})}}))};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[12,2,1]]]);
//# sourceMappingURL=main.816dad5d.chunk.js.map